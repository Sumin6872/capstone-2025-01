@use "../colors/color_variables";
@use "../typography/typography";
@use "../icons/primary_next_icon";
@use "../icons/choice_ellipse_icon";
@use "../icons/unchoice_ellipse_icon";
@use "../icons/danger_ellipse_icon";
@use "../icons/choice_triangle_icon";
@use "../icons/unchoice_triangle_icon";
@use "../icons/danger_triangle_icon";

.progress-bar-layer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 914px;
  margin: 0 auto;
  padding: 32px 0;
  position: relative;
  overflow: hidden;
}

.progress {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  flex-shrink: 0;

  &.active {
    .step-bubble {
      background-color: color_variables.$icon-choice-color;
      color: color_variables.$icon-default-background-color;
    }

    .triangle-icon {
      @extend .choice-triangle-icon;
    }

    .ellipse-icon {
      @extend .choice-ellipse-icon;
    }
  }

  &:not(.active):not(.danger) {
    .step-bubble {
      background-color: color_variables.$icon-unchoice-color;
      color: color_variables.$icon-default-background-color;
    }

    .triangle-icon {
      @extend .unchoice-triangle-icon;
    }

    .ellipse-icon {
      @extend .unchoice-ellipse-icon;
    }
  }

  &.danger {
    .step-bubble {
      background-color: color_variables.$icon-danger-color;
      color: color_variables.$icon-default-background-color;
    }

    .triangle-icon {
      @extend .danger-triangle-icon;
    }

    .ellipse-icon {
      @extend .danger-ellipse-icon;
    }
  }
}

.step-bubble-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-shrink: 0;
}

.step-bubble {
  padding: 8px 16px;
  border-radius: 12px;
  @extend .body-large;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  z-index: 1;
  flex-shrink: 0;
  white-space: nowrap;
}

.step-label {
  white-space: nowrap;
  display: inline-block;
}

.triangle-icon {
  margin-top: -8px;
  z-index: 1;
  flex-shrink: 0;
}

.step-line {
  position: absolute;
  top: 92px; 
  left: 225px;
  transform: translate(-46%, -50%); 
  width: 400px;
  height: 5px;
  background-color: color_variables.$icon-unchoice-color; 
  z-index: 0;

  &.active {
    background-color: color_variables.$icon-choice-color; 
  }

  &.danger {
    background-color: color_variables.$icon-danger-color; 
  }
}

.primary-next-icon {
  flex-shrink: 0;
  display: inline-block;
  vertical-align: middle;
  @extend .primary-next-icon;
}

.ellipse-icon {
  margin-top: 10px;
  z-index: 1;
}